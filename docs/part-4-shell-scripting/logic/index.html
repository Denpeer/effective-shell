<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Mastering the If Statement"><meta property="og:title" content="Mastering the If Statement"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:url" content="https://effective-shell.com/docs/part-4-shell-scripting/logic/"><title>Mastering the If Statement | Effective Shell</title><link rel=icon href=/favicon.png type=image/x-icon><link rel=stylesheet href=/book.min.f8520695a602b532b093067e25561bfe6fa10ca8c25171b97142acf58fa8f13c.css integrity="sha256-+FIGlaYCtTKwkwZ+JVYb/m+hDKjCUXG5cUKs9Y+o8Tw="><script defer src=/en.search.min.fc205ecc7cbf97e98d147373b77353d24cc90bab8e846c7be3f535114b9422aa.js integrity="sha256-/CBezHy/l+mNFHNzt3NT0kzJC6uOhGx74/U1EUuUIqo="></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-155335600-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><link rel=alternate type=application/rss+xml href=https://effective-shell.com/docs/part-4-shell-scripting/logic/index.xml title="Effective Shell"></head><body><input type=checkbox class=hidden id=menu-control><main class="flex container"><aside class="book-menu fixed"><nav><h2 class=book-brand><a href=https://effective-shell.com/><span>Effective Shell</span></a></h2><h2 class=book-subtitle><span>By Dave Kerr</span></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64><div class="book-search-spinner spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><a href=/docs/introduction/><strong>Introduction</strong></a></li><li><a href=/docs/getting-started/><strong>Getting Started</strong></a></li><li><a href=/docs/part-1-transitioning-to-the-shell/><strong>Part 1 - Transitioning to the Shell</strong></a><ul><li><a href=/docs/part-1-transitioning-to-the-shell/navigating-your-system/>Navigating Your System</a></li><li><a href=/docs/part-1-transitioning-to-the-shell/managing-your-files/>Managing Your Files</a></li><li><a href=/docs/part-1-transitioning-to-the-shell/clipboard-gymnastics/>Clipboard Gymnastics</a></li><li><a href=/docs/part-1-transitioning-to-the-shell/getting-help/>Getting Help</a></li><li><a href=/docs/part-1-transitioning-to-the-shell/the-renaissance-of-the-shell/>The Renaissance of the Shell</a></li></ul></li><li><a href=/docs/part-2-core-skills/><strong>Part 2 - Core Skills</strong></a><ul><li><a href=/docs/part-2-core-skills/thinking-in-pipelines/>Thinking in Pipelines</a></li><li><a href=/docs/part-2-core-skills/fly-on-the-command-line/>Fly on the Command Line</a></li><li><a href=/docs/part-2-core-skills/job-control/>Job Control</a></li><li><a href=/docs/part-2-core-skills/understanding-commands/>Understanding Commands</a></li><li><a href=/docs/part-2-core-skills/finding-files/>Finding Files</a></li><li><a href=/docs/part-2-core-skills/what-is-a-shell/>What is a Shell?</a></li></ul></li><li><a href=/docs/part-3-manipulating-text/><strong>Part 3 - Manipulating Text</strong></a><ul><li><a href=/docs/part-3-manipulating-text/regex-essentials/>Regex Essentials</a></li><li><a href=/docs/part-3-manipulating-text/get-to-grips-with-grep/>Get to Grips with Grep</a></li><li><a href=/docs/part-3-manipulating-text/slice-and-dice-text/>Slice and Dice Text</a></li><li><a href=/docs/part-3-manipulating-text/advanced-text-manipulation/>Advanced Text Manipulation with Sed</a></li><li><a href=/docs/part-3-manipulating-text/build-commands-on-the-fly/>Build Commands on the Fly with Xargs</a></li></ul></li><li><a href=/docs/part-4-shell-scripting/><strong>Part 4 - Shell Scripting</strong></a><ul><li><a href=/docs/part-4-shell-scripting/shell-script-essentials/>Shell Script Essentials</a></li><li><a href=/docs/part-4-shell-scripting/variables-reading-input-and-mathematics/>Variables, Reading Input, and Mathematics</a></li><li><a href=/docs/part-4-shell-scripting/mastering-the-if-statement/>Mastering the If Statement</a></li></ul></li><li><a href=/docs/work-in-progress/><strong>Work in Progress</strong></a></li></ul></nav><script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script></aside><div class=book-page><header class="flex align-center justify-between book-header"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Mastering the If Statement</strong></header><article class=markdown><h1 id=chapter-20---mastering-the-if-statement>Chapter 20 - Mastering the If Statement</h1><p>In this chapter we'll introduce the <em>if statement</em> - this is a crucial feature of the shell as it allows us to create perform operations only when certain conditions are met. First we'll look at the basics of how the statement is used and then look at some more advanced scenarios.</p><p>Let's get right into it!</p><h1 id=the-if-statement---index--->The If Statement</h1><p>We can use the <em>if statement</em> to perform operations in shell scripts only when certain conditions are met. Let's take a look at a simple example:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> -e /usr/local/bin/common <span style=color:#f92672>]</span>; <span style=color:#66d9ef>then</span>
    echo <span style=color:#e6db74>&#34;The &#39;common&#39; command has been installed in the local bin folder.&#34;</span>
<span style=color:#66d9ef>fi</span>
</code></pre></div><p>This script checks to see whether a file or folder exists in the location <em>/usr/local/bin/common</em> (the &lsquo;common&rsquo; command is the command we created in <a href=/docs/part-4-shell-scripting/shell-script-essentials/>Chapter 18 - Shell Script Essentials</a>.</p><p>The <em>if</em> statement is used to check whether a certain condition is true or not. When we write an <em>if</em> statement we start with the word <em>if</em>, then place an <em>expression</em> in square brackets, then we use a semi-colon to indicate that we have finished the statement. Finally we use the <em>then</em> command to indicate that the commands that follow should be executed if the test evaluates to true.</p><p>Shell commands <em>can</em> end with a semi-colon - but they don't have to. If you don't include a semi-colon at the end of a command then the shell assumes that the entire line is a command. So if you try and run the script without the semi-colon you will get an error:</p><pre><code>bash: syntax error near unexpected token `fi'
</code></pre><p>This is because <em>if</em> is a statement and <em>then</em> is a statement - together they are two statements. So we can either write them on one line, separated with a semi-colon, or just split them into two lines like this:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> -e /usr/local/bin/common <span style=color:#f92672>]</span>
<span style=color:#66d9ef>then</span>
    echo <span style=color:#e6db74>&#34;The &#39;common&#39; command has been installed in the local bin folder.&#34;</span>
<span style=color:#66d9ef>fi</span>
</code></pre></div><p>Some people will use the first form, which is shorter, some people prefer the second form. This is really just a matter of personal preference.</p><p>Let's look at the <em>expression</em> we have in the <em>if</em> statement:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>-e /usr/local/bin/common
</code></pre></div><p>This expression uses the <code>-e</code> (<em>file exists</em>) operator. This operator takes a single parameter - a path. If a file or folder <em>exists</em> in the path, the expression evaluates to true.</p><p>Finally, we use the <em>fi statement</em> to &lsquo;close&rsquo; the <em>if</em> statement. This indicates to the shell that we have finished providing statements that run if the test is true.</p><p>If you have the script installed then you will see the following output:</p><pre><code>The 'common' command has been installed in the local bin folder.
</code></pre><p>If you don't have the script installed then you will see no output.</p><h2 id=the-else-statement---index--->The Else Statement</h2><p>You can use the <em>else statement</em> to define a series of statements that should be executed if the condition in the <em>if</em> statement is <em>not</em> true.</p><p>Here's how we could update our script to show a message if the command does not exist in the specified location:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> -e /usr/local/bin/common <span style=color:#f92672>]</span>; <span style=color:#66d9ef>then</span>
    echo <span style=color:#e6db74>&#34;The &#39;common&#39; command has been installed in the local bin folder.&#34;</span>
<span style=color:#66d9ef>else</span>
    echo <span style=color:#e6db74>&#34;The &#39;common&#39; command has not been installed in the local bin folder.&#34;</span>
<span style=color:#66d9ef>fi</span>
</code></pre></div><p>Now if you run the script and you don't have the &lsquo;common&rsquo; command installed you will see the following output:</p><pre><code>The 'common' command has not been installed in the local bin folder.
</code></pre><p>Note that we still need to use the <em>fi statement</em> to close the <em>if</em> statement.</p><h2 id=the-elif-statement---index--->The Elif Statement</h2><p>The <em>elif statement</em> (which is short for &lsquo;else if&rsquo;) can be used to create additional checks and define statements that should run if <em>other</em> conditions are true.</p><p>Let's see this in action by updating our script to check to see whether the &lsquo;common&rsquo; command is executable. We can do this using the <code>-x</code> (<em>is executable</em>) operator.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> -x /usr/local/bin/common <span style=color:#f92672>]</span>; <span style=color:#66d9ef>then</span>
    echo <span style=color:#e6db74>&#34;The &#39;common&#39; command has been installed in the local bin folder and is executable.&#34;</span>
<span style=color:#66d9ef>elif</span> <span style=color:#f92672>[</span> -e /usr/local/bin/common <span style=color:#f92672>]</span>; <span style=color:#66d9ef>then</span>
    echo <span style=color:#e6db74>&#34;The &#39;common&#39; command has been installed in the local bin folder but is not executable.&#34;</span>
<span style=color:#66d9ef>else</span>
    echo <span style=color:#e6db74>&#34;The &#39;common&#39; command has not been installed in the local bin folder.&#34;</span>
<span style=color:#66d9ef>fi</span>
</code></pre></div><p>The message you see will depend on whether you have installed the &lsquo;common&rsquo; command in your local binaries folder and whether the &lsquo;common&rsquo; script is executable. If you want to see each of the different messages, you might find the following snippets useful:</p><ul><li><code>ln -s $HOME/effective-shell/scripts/common.v1.sh /usr/local/bin/common</code> - Create a link to the &lsquo;common&rsquo; command in the local binaries folder</li><li><code>chmod -x $HOME/effective-shell/scripts/common.v1.sh</code> remove the &lsquo;executable&rsquo; flag from the &lsquo;common&rsquo; command, meaning it is not executable</li><li><code>chmod +x $HOME/effective-shell/scripts/common.v1.sh</code> add the &lsquo;executable&rsquo; flag from the &lsquo;common&rsquo; command, meaning it is executable</li><li><code>rm /usr/local/bin/common</code> remove the link to the &lsquo;common&rsquo; command from the local binaries folder</li></ul><p>The <em>elif</em> statement looks very similar to the <em>if</em> statement. It takes an <em>expression</em> in the square brackets and must be followed by a <em>then</em> statement.</p><p>It is very important to think about the order in which the <em>if</em> and <em>elif</em> statement are executed. If we had written the script like this, it would not work:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> -e /usr/local/bin/common <span style=color:#f92672>]</span>; <span style=color:#66d9ef>then</span>
    echo <span style=color:#e6db74>&#34;The &#39;common&#39; command has been installed in the local bin folder and is executable.&#34;</span>
<span style=color:#66d9ef>elif</span> <span style=color:#f92672>[</span> -x /usr/local/bin/common <span style=color:#f92672>]</span>; <span style=color:#66d9ef>then</span>
    echo <span style=color:#e6db74>&#34;The &#39;common&#39; command has been installed in the local bin folder but is not executable.&#34;</span>
<span style=color:#66d9ef>else</span>
    echo <span style=color:#e6db74>&#34;The &#39;common&#39; command has not been installed in the local bin folder.&#34;</span>
<span style=color:#66d9ef>fi</span>
</code></pre></div><p>In this script we check to see if the file exists first. If the file exists then the condition <code>-e</code> operator will return true, and we will <em>not</em> run the check in the <em>elif</em> statement. This means we'll <em>never</em> successfully evaluate the statements in the <em>elif</em> block (because for the file to be executable it must exist, so the first condition in the <em>if</em> statement will always take precedence. So it is important to think about the order of the statements!</p><h2 id=common-unary-file-operators>Common Unary File Operators</h2><p>_Unary Operators_ are operators that take a single argument. We've seen the <code>-e</code> and <code>-x</code> unary operators. Let's take a look at some of the other operators you might use when working with files:</p><table><thead><tr><th>Operator</th><th>Tests</th></tr></thead><tbody><tr><td><code>-d</code></td><td>The file exists and is a folder.</td></tr><tr><td><code>-e</code></td><td>The file exists, regardless of the file type.</td></tr><tr><td><code>-f</code></td><td>The file exists and is a regular file.</td></tr><tr><td><code>-L</code></td><td>The file exists and is a symbolic link.</td></tr><tr><td><code>-r</code></td><td>The file exists and is readable.</td></tr><tr><td><code>-s</code></td><td>The file exists and has a size greater than zero.</td></tr><tr><td><code>-w</code></td><td>The file exists is writable.</td></tr><tr><td><code>-x</code></td><td>The file exists and is executable - if it is a directory this checks if it can be searched.</td></tr></tbody></table><p>There are plenty of other operators that you can use when working with files, you can see them all by running <code>man test</code>.</p><h2 id=common-binary-file-operators>Common Binary File Operators</h2><h2 id=common-unary-operators>Common Unary Operators</h2><h2 id=common-binary-operators>Common Binary Operators</h2><hr><ul><li>updating our &lsquo;common&rsquo; script</li><li>conditionals</li><li>difference between <code>if [</code> and <code>if [[</code>.</li><li><code>man test</code></li><li>test a regex, e.g. check $SHELL and see if it is zsh, check output of uname -u to check linux version</li><li>chainde commands: <code>git pull && git checkout</code>, chained OR, OR true</li></ul><h4 id=chapter-19---operating-on-files-and-folders>Chapter 19 - Operating on Files and Folders</h4><p>One of the most common tasks we will do when scripting is operating functions over a set of files or folders. In this chapter we'll look at basic loops, tests and how to operate on many files. We'll also see how we can integrate commands like <code>find</code> into shell scripts.</p></article><div class="book-footer justify-between"><div><a class="flex align-center" href=https://github.com/dwmkerr/effective-shell/commit/fb2f2d9773b4dbb7e98b54a049b19e2388d74559 title="Last modified by Dave Kerr | May 22, 2021" target=_blank><img src=/svg/calendar.svg class=book-icon alt=Calendar>
<span>May 22, 2021</span></a></div><div><a class="flex align-center" href=https://github.com/dwmkerr/effective-shell/edit/master/website/content/docs/part-4-shell-scripting/logic/_index.md target=_blank><img src=/svg/edit.svg class=book-icon alt=Edit>
<span>Edit this page</span></a></div></div><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return;}
var d=document,s=d.createElement('script');s.async=true;s.src='//'+"effective-shell"+'.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a><p>Copyright &copy; <script>document.write(new Date().getFullYear())</script>, Dave Kerr</p></div><aside class="book-toc levels-3 fixed"><nav id=TableOfContents><ul><li><a href=#chapter-20---mastering-the-if-statement>Chapter 20 - Mastering the If Statement</a></li><li><a href=#the-if-statement---index--->The If Statement</a><ul><li><a href=#the-else-statement---index--->The Else Statement</a></li><li><a href=#the-elif-statement---index--->The Elif Statement</a></li><li><a href=#common-unary-file-operators>Common Unary File Operators</a></li><li><a href=#common-binary-file-operators>Common Binary File Operators</a></li><li><a href=#common-unary-operators>Common Unary Operators</a></li><li><a href=#common-binary-operators>Common Binary Operators</a><ul><li></li></ul></li></ul></li></ul></nav></aside></main></body></html>