<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Fly on the Command Line"><meta property="og:title" content="Fly on the Command Line"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:url" content="https://effective-shell.com/docs/part-2-core-skills/fly-on-the-command-line/"><title>Fly on the Command Line | Effective Shell</title><link rel=icon href=/favicon.png type=image/x-icon><link rel=stylesheet href=/book.min.f8520695a602b532b093067e25561bfe6fa10ca8c25171b97142acf58fa8f13c.css integrity="sha256-+FIGlaYCtTKwkwZ+JVYb/m+hDKjCUXG5cUKs9Y+o8Tw="><script defer src=/en.search.min.2c6a5eafd40bec16e61fc36ad4384da3dd70573332d0d6341d7de295dc547ad0.js integrity="sha256-LGper9QL7BbmH8Nq1DhNo91wVzMy0NY0HX3ildxUetA="></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-155335600-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><link rel=alternate type=application/rss+xml href=https://effective-shell.com/docs/part-2-core-skills/fly-on-the-command-line/index.xml title="Effective Shell"></head><body><input type=checkbox class=hidden id=menu-control><main class="flex container"><aside class="book-menu fixed"><nav><h2 class=book-brand><a href=https://effective-shell.com/><span>Effective Shell</span></a></h2><h2 class=book-subtitle><span>By Dave Kerr</span></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64><div class="book-search-spinner spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><a href=/docs/introduction/><strong>Introduction</strong></a></li><li><a href=/docs/getting-started/><strong>Getting Started</strong></a></li><li><a href=/docs/part-1-transitioning-to-the-shell/><strong>Part 1 - Transitioning to the Shell</strong></a><ul><li><a href=/docs/part-1-transitioning-to-the-shell/navigating-your-system/>Navigating Your System</a></li><li><a href=/docs/part-1-transitioning-to-the-shell/managing-your-files/>Managing Your Files</a></li><li><a href=/docs/part-1-transitioning-to-the-shell/clipboard-gymnastics/>Clipboard Gymnastics</a></li><li><a href=/docs/part-1-transitioning-to-the-shell/getting-help/>Getting Help</a></li><li><a href=/docs/part-1-transitioning-to-the-shell/the-renaissance-of-the-shell/>The Renaissance of the Shell</a></li></ul></li><li><a href=/docs/part-2-core-skills/><strong>Part 2 - Core Skills</strong></a><ul><li><a href=/docs/part-2-core-skills/thinking-in-pipelines/>Thinking in Pipelines</a></li><li><a href=/docs/part-2-core-skills/fly-on-the-command-line/ class=active>Fly on the Command Line</a></li><li><a href=/docs/part-2-core-skills/job-control/>Job Control</a></li><li><a href=/docs/part-2-core-skills/understanding-commands/>Understanding Commands</a></li><li><a href=/docs/part-2-core-skills/finding-files/>Finding Files</a></li><li><a href=/docs/part-2-core-skills/what-is-a-shell/>What is a Shell?</a></li></ul></li><li><a href=/docs/part-3-manipulating-text/><strong>Part 3 - Manipulating Text</strong></a><ul><li><a href=/docs/part-3-manipulating-text/get-to-grips-with-grep/>Get to Grips with Grep</a></li><li><a href=/docs/part-3-manipulating-text/slice-and-dice-text/>Slice and Dice Text</a></li><li><a href=/docs/part-3-manipulating-text/advanced-text-manipulation/>Advanced Text Manipulation with Sed</a></li><li><a href=/docs/part-3-manipulating-text/build-commands-on-the-fly/>Build Commands on the Fly with Xargs</a></li><li><a href=/docs/part-3-manipulating-text/regex-essentials/>Regex Essentials</a></li></ul></li><li><a href=/docs/work-in-progress/><strong>Work in Progress</strong></a></li></ul></nav><script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script></aside><div class=book-page><header class="flex align-center justify-between book-header"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Fly on the Command Line</strong></header><article class=markdown><h1 id=chapter-8---fly-on-the-command-line>Chapter 8 - Fly on the Command Line</h1><p>This is my favourite chapter of the book! The tricks I picked up on rapidly moving around in the command line have saved me an enormous amount of time over the years.</p><p>In this chapter, we'll look at the ways you can rapidly move your cursor around on the command line, as well as how to easily open up the current command in an editor (which is <em>incredibly</em> useful if you realise you are building a more complex sequence of commands).</p><p>Below is a quick reference which you can use - we'll see each operation in more detail as we go through the chapter!</p><p><a href=https://github.com/dwmkerr/effective-shell><img src=images/command-line.png alt="command line"></a></p><ul><li><a href=#basic-navigation>Basic Navigation</a><ul><li><a href=#go-to-beginning--end>Go to beginning / end</a></li><li><a href=#move-backwards--forwards-one-word>Move backwards / forwards one word</a></li><li><a href=#delete-a-word-or-undo-a-mistake>Delete a word or undo a mistake</a></li><li><a href=#delete-the-next-word>Delete the next word</a></li><li><a href=#delete-to-beginning--clear-line>Delete to beginning / clear line</a></li><li><a href=#delete-to-end>Delete to end</a></li></ul></li><li><a href=#searching>Searching</a><ul><li><a href=#search-backwards--forwards>Search Backwards / Forwards</a></li><li><a href=#run-the-command-found-in-a-search>Run the command found in a search</a></li><li><a href=#edit-the-command-found>Edit the command found</a></li><li><a href=#stop-searching>Stop Searching</a></li></ul></li><li><a href=#editing-in-place>Editing In-Place</a></li><li><a href=#clear-the-screen>Clear the Screen</a></li><li><a href=#see-the-history-and-execute-a-recent-command>See the History and Execute a Recent Command</a></li><li><a href=#pro-tip-all-the-keys>Pro Tip: All The Keys!</a></li><li><a href=#pro-tip-transposing>Pro Tip: Transposing!</a></li><li><a href=#the-power-of-readline>The Power of Readline</a></li></ul><h1 id=basic-navigation>Basic Navigation</h1><p>Let's assume we have a very simple command we are writing, which is going to write a quote to a text file:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>echo <span style=color:#e6db74>&#34;The trouble with writing fiction is that it has to make sense,
</span><span style=color:#e6db74>whereas real life doesn&#39;t. -- Iain M. Banks&#34;</span> &gt;&gt; quote.txt
</code></pre></div><p>Navigating around long lines of text is a slow process if you are only relying on the arrow keys.</p><p>Let's see how we can quickly move around and manipulate text!</p><h2 id=go-to-beginning--end>Go to beginning / end</h2><p>Quickly jump to the beginning or end of the text:</p><ul><li><code>Ctrl + a</code> - Go to beginning</li><li><code>Ctrl + e</code> - Go to end</li></ul><p><img src=images/begin-end.gif alt="begin / end"></p><h2 id=move-backwards--forwards-one-word>Move backwards / forwards one word</h2><p>For a little more fine-grained movement, you can jump backwards or forwards one word at a time:</p><ul><li><code>Alt + b</code> - Go back one word</li><li><code>Alt + f</code> - Go forward one word</li></ul><p><img src=images/forward-backwards.gif alt="backward / forward"></p><h2 id=delete-a-word-or-undo-a-mistake>Delete a word or undo a mistake</h2><p>As this is the first operation we're seeing which <em>changes</em> the text, it is useful to remember how to <em>undo</em> any changes you make!</p><ul><li><code>Ctrl + w</code> - Delete a word</li><li><code>Ctrl + -</code> - Undo most recent change</li></ul><p><img src=images/delete-undo.gif alt="delete / undo"></p><h2 id=delete-the-next-word>Delete the next word</h2><p>We've seen how to delete the word on or behind the cursor, now let's see how to delete the <em>next</em> word:</p><ul><li><code>Alt + d</code> - Delete next word</li></ul><p><img src=images/delete-next-word.gif alt="delete next word"></p><p>Remember, just like any edit you can undo these changes with the <code>Ctrl + -</code> command.</p><h2 id=delete-to-beginning--clear-line>Delete to beginning / clear line</h2><p>In the Bash shell, you can delete all the way to the beginning of the line with <code>Ctrl + u</code>. However - if you are using the Z-Shell this will delete the entire line!</p><ul><li><code>Ctrl + u</code> - Delete to beginning of line OR delete line</li></ul><p><img src=images/delete-to-beginning.gif alt="delete to beginning"></p><h2 id=delete-to-end>Delete to end</h2><p>You can also delete all of the way to the end of the line.</p><ul><li><code>Ctrl + k</code> - Delete to end</li></ul><p><img src=images/delete-to-end.gif alt="delete to end"></p><p>When you find yourself repeatedly using the arrow or delete keys, refer back to this section to remind yourself of the shortcut - it will save a lot of time in the long run!</p><h1 id=searching>Searching</h1><p>Once you have the basic navigation commands down, the next essential is <em>searching</em>. Let's assume we've run the following three commands:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ command1 param1 param2 param3
$ command2 param4 param5 param6
$ command3 param7 param8 param9
</code></pre></div><p>You can search backwards or forwards with <code>Ctrl + r</code> and <code>Ctrl + s</code>. This will search in the current line and then iteratively through previous lines:</p><p><img src=images/search-backwards-and-forwards.gif alt="search backwards and forwards"></p><p>People often remember this as searching through the history - but remember that it actually searches the <em>current line</em> as well. So this is often the fastest way to move to the desired location in the current line.</p><p>This is useful for searching in the current command, but can be also used to quickly search backwards and forwards through the command history:</p><p><img src=images/search-commands-backwards-and-forwards.gif alt="search commands backwards and forwards"></p><p>As you type, your command history is searched, the most recent commands coming first. Use the arrow keys to edit the command, press enter to execute it, or <code>Ctrl + g</code> to cancel the search.</p><p>I think it's a little easier to see these commands in action with a more realistic example, so here's how they look with the text we used earlier.</p><h2 id=search-backwards--forwards>Search Backwards / Forwards</h2><p>Search backwards or forwards through the current line and also the history:</p><ul><li><code>Ctrl + r</code> - Search backwards (<em>reverse</em> search)</li><li><code>Ctrl + s</code> - Search forwards</li></ul><p><img src=images/search-history-next.gif alt="find next occurrence"></p><h2 id=run-the-command-found-in-a-search>Run the command found in a search</h2><p>This one is easy! Just hit <code>Enter</code>:
<img src=images/search-history-execute.gif alt=execute></p><h2 id=edit-the-command-found>Edit the command found</h2><p>When you have found the command or positioned the cursor where you want it, use the Left or Right arrow keys to stop searching and to go back into the normal editing mode:</p><p><img src=images/search-history-edit.gif alt="edit command"></p><h2 id=stop-searching>Stop Searching</h2><p>Cancel the search and return back to the text as it was before you started with the <code>Ctrl + g</code> command:</p><p><img src=images/search-history-cancel.gif alt="cancel search"></p><h1 id=editing-in-place>Editing In-Place</h1><p>These tips and tricks are helpful, but if you are working with a really long or complex command, you might find it useful just to jump into your favourite editor. This is one of those tricks that when you know it, you'll wonder how you lived without it!</p><p>Use <code>Ctrl + x , Ctrl + e</code> to edit-in place, opening the current command line in your default editor:</p><p><img src=images/edit-in-place.gif alt="edit in place"></p><p>Now it's important to explain that this is the <em>shell's</em> default editor. This might not be the same as the default editor for your operating system. You can see what the shell is using as its default editor by printing the contents of the <code>EDITOR</code> environment variable. For example, my shell will show this:</p><pre><code>$ echo $EDITOR
vim
</code></pre><p>This means <code>vim</code> will be used to edit the command line. Your shell might use <code>emacs</code> or <code>nano</code> as a default editor. Unless you are familiar with <code>vim</code> or <code>emacs</code>, you might not find them particularly user friendly as an editor. You can change your default editor by setting the <code>EDITOR</code> variable. For example, below I set the editor to <code>code</code> (with the <code>-w</code> flag which tells the <code>code</code> program not to return control immediately back to the shell but instead wait until I've finished editing the file):</p><p><img src=./images/editor-vs-code.gif alt="Screen Capture: Edit in Place with Visual Studio Code"></p><p>Now this works (just about), but I wouldn't recommend using a Graphical Editor like Visual Studio Code for this. The reason is that because the editor runs in a separate window, it is actually easy to lose track of it (or the shell). You pause to take a short break, come back, close the editor and the contents are either lost or written to the shell (and if you see in the example above, the shell actually <em>executed</em> the command, rather than just putting it in the command line ready for me to execute).</p><p>The other reason to avoid a graphical editor is that if you are using a shell on another user's machine, the editor might not be present (or might be configured differently). In general however, the main reason to avoid a graphical editor is that it moves the <em>context</em> of the command away from where you are in the shell to another place, which can be confusing. If you see the screenshot below, I have <em>two</em> editors open:</p><p><img src=./images/multiple-editors.png alt="Screenshot: Two shell editors"></p><p>The top right pane has my <code>git commit</code> command running (which is asking me to write a description of my changes) and the bottom right pane has the command line editor running (where I am testing out the commands for this chapter).</p><p>In this example, each editor has taken the place of the contents of the shell, so there's no ambiguity about <em>which</em> command I am editing. If I was to open a graphical editor, it would open multiple tabs for this operation and I'd have to track which tab was which.</p><p>It can be daunting to learn an editor like <code>vim</code> or <code>emacs</code>. Chapter 27 goes into more detail on the terminal based text editors - for now if you are not familiar with these programs I recommend you use the <code>nano</code> editor. Nano is small, simple and shows the shortcuts in a convenient menu at the bottom of the screen:</p><p><img src=./images/screenshot-nano.png alt="Screenshot: The Nano Editor"></p><p>In Chapter 18 we'll see how to make permanent customisations to the shell, configuring things like the default editor.</p><h1 id=clear-the-screen>Clear the Screen</h1><p>Probably the shortcut I use the most is <code>Ctrl + l</code>, which clears the screen without trashing your current command. Here's how it looks:</p><p><img src=images/clear-screen.gif alt="clear screen"></p><p>This is very helpful if you have a lot of noise and output on the screen and are ready to start with a fresh command.</p><h1 id=see-the-history-and-execute-a-recent-command>See the History and Execute a Recent Command</h1><p>Just a few days ago a friend showed me a fantastic trick. If you run the <code>history</code> command, the shell will print the recent history of commands you have entered. But as an added bonus, you can <em>execute</em> any of these commands by entering an exclamation mark and the number next to the command:</p><p><img src=./images/screenshot-history.png alt="Screenshot History and Execute Recent Command"></p><p>The number is actually just the <em>line number</em> in the <em>history file</em>. Most shells maintain a history of commands which have been entered (to allow for things like searching through old commands). Where this history file is kept will depend on your shell, configuration and operating system, but in most cases you can find the file by running:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>echo $HISTFILE
</code></pre></div><p>There are many configuration options for the shell history. But the main thing to remember is that you can see recent history with the <code>history</code> command and quickly execute the command at line <code>n</code> by running <code>!n</code>.</p><h1 id=pro-tip-all-the-keys>Pro Tip: All The Keys!</h1><p>You can use the <code>bindkey</code> command to see a list of all keyboard shortcuts:</p><pre><code>$ bindkey
&quot;^@&quot; set-mark-command
&quot;^A&quot; beginning-of-line
&quot;^B&quot; backward-char
&quot;^D&quot; delete-char-or-list
&quot;^E&quot; end-of-line
&quot;^F&quot; forward-char
&quot;^G&quot; send-break
&quot;^H&quot; backward-delete-char
&quot;^I&quot; expand-or-complete
&quot;^J&quot; accept-line
&quot;^K&quot; kill-line
&quot;^L&quot; clear-screen
...
</code></pre><p>This is an extremely useful command to use if you forget the specific keyboard shortcuts, or just want to see the shortcuts which are available.</p><h1 id=pro-tip-transposing>Pro Tip: Transposing!</h1><p>If you've mastered all of the commands here and feel like adding something else to your repertoire, try this:</p><p><img src=images/transpose-word.gif alt=transpose-word></p><p>The <code>Alt + t</code> shortcut will transpose the last two words. Use <code>Ctrl + t</code> to transpose the last two letters:</p><p><img src=images/transpose-letters.gif alt=transpose-letters></p><p>These two commands were new to me when I was researching this chapter. I can't see myself ever being able to remember the commands more quickly than just deleting the last two words (<code>Ctrl+w</code> twice!) or characters and re-typing them, but perhaps you'll find them useful!</p><h1 id=the-power-of-readline>The Power of Readline</h1><p>All of the movement commands you've learned in this chapter apply to:</p><ol><li>Bash</li><li>zsh</li><li>The Python REPL</li><li>The Node.js REPL</li></ol><p>And many more! The reason is that all of these programs use the same library under the hood to control reading command line input. This library is called <em>GNU Readline</em>.</p><p>If you are ever looking to go deeper on this topic then search the web for <em>GNU Readline</em>. You can actually configure lower level details of how all programs which use readline work, with the <a href=https://www.gnu.org/software/bash/manual/html_node/Readline-Init-File.html><code>.inputrc</code></a> configuration file.</p><p>This configuration file can be used to configure things like the shortcuts used to move around. All of these shortcuts should be familiar to Emacs users. There is in fact also &lsquo;Vi Mode&rsquo; option for readline, which allows you to use <code>vi</code> commands to work with text. You can enter this mode with <code>set -o vi</code>.</p><p>There's a great cheat sheet on emacs readline commands at <a href=http://readline.kablamo.org/emacs.html>readline.kablamo.org/emacs</a>, which is a very useful reference if you want to dig deeper.</p><p>We'll also see <em>GNU Readline</em> later on when we talk about writing programs which work well in the shell.</p><p>I Hope that was useful! Being able to rapidly move around the command line will hopefully save you time and make you a more confident user of not just the shell, but many command line programs.</p><hr><p><strong>Footnotes</strong></p><p>GIFs were made with <a href=http://www.cockos.com/licecap/>LICEcap</a>.</p></article><div class="book-footer justify-between"><div><a class="flex align-center" href=https://github.com/dwmkerr/effective-shell/commit/5d92674928ea04f3a84ac9a615b46b6e53a6b716 title="Last modified by Tobias Büschel | Feb 5, 2021" target=_blank><img src=/svg/calendar.svg class=book-icon alt=Calendar>
<span>Feb 5, 2021</span></a></div><div><a class="flex align-center" href=https://github.com/dwmkerr/effective-shell/edit/master/website/content/docs/part-2-core-skills/fly-on-the-command-line/_index.md target=_blank><img src=/svg/edit.svg class=book-icon alt=Edit>
<span>Edit this page</span></a></div></div><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return;}
var d=document,s=d.createElement('script');s.async=true;s.src='//'+"effective-shell"+'.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a><p>Copyright &copy; <script>document.write(new Date().getFullYear())</script>, Dave Kerr</p></div><aside class="book-toc levels-3 fixed"><nav id=TableOfContents><ul><li><a href=#chapter-8---fly-on-the-command-line>Chapter 8 - Fly on the Command Line</a></li><li><a href=#basic-navigation>Basic Navigation</a><ul><li><a href=#go-to-beginning--end>Go to beginning / end</a></li><li><a href=#move-backwards--forwards-one-word>Move backwards / forwards one word</a></li><li><a href=#delete-a-word-or-undo-a-mistake>Delete a word or undo a mistake</a></li><li><a href=#delete-the-next-word>Delete the next word</a></li><li><a href=#delete-to-beginning--clear-line>Delete to beginning / clear line</a></li><li><a href=#delete-to-end>Delete to end</a></li></ul></li><li><a href=#searching>Searching</a><ul><li><a href=#search-backwards--forwards>Search Backwards / Forwards</a></li><li><a href=#run-the-command-found-in-a-search>Run the command found in a search</a></li><li><a href=#edit-the-command-found>Edit the command found</a></li><li><a href=#stop-searching>Stop Searching</a></li></ul></li><li><a href=#editing-in-place>Editing In-Place</a></li><li><a href=#clear-the-screen>Clear the Screen</a></li><li><a href=#see-the-history-and-execute-a-recent-command>See the History and Execute a Recent Command</a></li><li><a href=#pro-tip-all-the-keys>Pro Tip: All The Keys!</a></li><li><a href=#pro-tip-transposing>Pro Tip: Transposing!</a></li><li><a href=#the-power-of-readline>The Power of Readline</a></li></ul></nav></aside></main></body></html>